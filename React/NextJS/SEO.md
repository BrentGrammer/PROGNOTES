# SEO

- Make sure every page has SEO friendly meta tags.
- use the metadata config in layout.tsx to ensure every page has app wide properties like author, category etc. and then go to individual pages to overwrite those props as needed per page.
- note `export const metadata` is a convention that Next.js looks for, so you need to name it that way to get picked up.

```javascript
// app layout.tsx
import type { Metadata } from "next";

export const metadata: Metadata = {
  title: "Create Next App",
  description: "Generated by create next app",
  openGraph: { // for social media
    title: "my title",
    description: "my description",
    // images, category...
  },
};

export default function RootLayout({
  children,
}: {
  children: React.ReactNode,
}) {
  return (
    <html lang="en" data-theme="winter">
      <body className={poppinsFont.variable}></body>
    </html>
  );
}
```

```javascript
// specific page overwrites
import { Metadata } from "next";

export default async function Home() {
  return (
    <main>
      <h1>My other page</h1>
    </main>
  );
}

export const metadata: Metadata = {
  title: "page specific title", // overwrite title metadata for this page
};
```

### Dynamic Metadata

- You may need to generate metadata dynamically for routes with parameters, etc.
- use generateMetadata (built in fn that Nextjs expects as an export for the page)
  - The generateMetadata function recieves the props that the page does
  - You can make the same request if the record data is needed for the metadata and it will not be run twice - NextJS will dedup the requests made on the page and metadata generation.

```javascript
import { Metadata } from "next";

interface Props {
  params: { id: number };
}

// generateMetaData receives the same params your component does
export async function generateMetadata({
  params: { id },
}: Props): Promise<Metadata> {
  // fetch something from api - you can make the same request here as NextJS will dedup these automatically
  const req = await fetch(`http://localhost:3000/api/users/${id}`);
  const user = await req.json();

  // return the metadata object
  return {
    title: user.name,
    description: `This is the page for ${user.id}`,
    //...
  };
}

const UserDetailPage = async ({ params: { id } }: Props) => {
  const req = await fetch(`http://localhost:3000/api/users/${id}`);
  const user = await req.json();

  return (
    <div>
      <h2>{user.name}</h2>
    </div>
  );
};
```
